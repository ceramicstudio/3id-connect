(this["webpackJsonp3id-management-app"]=this["webpackJsonp3id-management-app"]||[]).push([[0],{230:function(n,e,t){},279:function(n,e){},280:function(n,e){},303:function(n,e){},305:function(n,e){},315:function(n,e){},317:function(n,e){},343:function(n,e){},345:function(n,e){},350:function(n,e){},352:function(n,e){},364:function(n,e){},367:function(n,e){},446:function(n,e,t){"use strict";t.r(e);var r=t(0),c=t.n(r),a=t(73),i=t.n(a),o=(t(230),t(203)),u=t(44),l=t(462),d=t(460),s=t(461),f=t(220),h=t(4),b=t.n(h),j=t(57),v=t(29),p=t(221),g=t(32),x={dids:{"did:3:kjzl6cwe1jw14bjz38e4myqcf7eeoqfb1wwdtaqcxx527o9oxfuel1on7reg83x":["0xea8b36116ff496db2e47970cca7d98dd02c1c5a4@eip155:1"]},linkToDID:"did:3:kjzl6cwe1jw14aheres4u4grnspw7dovil4qcnxr567jvwhp3ovjdrn5kxh7544"},m=t(110),w=t(205),O=t.n(w),y=t(222),k=new O.a("https://ceramic-clay.3boxlabs.com"),C=new y.a({ceramic:k});function z(n){return A.apply(this,arguments)}function A(){return(A=Object(j.a)(b.a.mark((function n(e){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,C.get("basicProfile",e);case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),n.abrupt("return",null);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))).apply(this,arguments)}function I(n,e){var t,r=e.height,c=e.width,a=null,i=Object(m.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.height>=r&&o.width>=c&&(null===a||null!=a.size&&null!=o.size&&o.size<a.size||o.height*o.width<a.height*a.width)&&(a=o)}}catch(u){i.e(u)}finally{i.f()}return a}function L(n,e){var t,r=e.height,c=e.width,a=null,i=Object(m.a)(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.height<=r&&o.width<=c&&(null===a||null!=a.size&&null!=o.size&&o.size<a.size||o.height*o.width>a.height*a.width)&&(a=o)}}catch(u){i.e(u)}finally{i.f()}return a}function D(n,e,t){return function(n,e){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cover",c=null;return Array.isArray(n.alternatives)&&(c="cover"===r?I(n.alternatives,e):L(n.alternatives,e)),null!==(t=c)&&void 0!==t?t:n.original}(n,e,t).src.replace("ipfs://","https://ipfs.infura.io/ipfs/")}var F=new p.a({supportedChainIds:[1,3,4,5,42]});function E(){var n=Object(r.useState)(null),e=Object(v.a)(n,2),t=e[0],c=e[1];return Object(r.useEffect)((function(){function n(n){n.origin}return c(x),window.addEventListener("message",n,!1),function(){window.removeEventListener("message",n)}}),[]),t}var S={"0x01":"1","0x1":"1","0x03":"3","0x3":"3","0x04":"4","0x4":"4","0x05":"5","0x5":"5","0x2a":"42"};function q(n){return"object"===typeof n?n:{namespace:"eip155",reference:"number"===typeof n?n.toString():S[n]||n}}var P="#FC1591",J={global:{colors:{brand:P,focus:P,text:"#181817","accent-1":"rgba(252, 21, 145, 0.1)","neutral-1":"#757575","neutral-2":"#888888","neutral-3":"#909090","neutral-4":"#A8A8A8","neutral-5":"#D8D8D8","neutral-6":"#F7F7F7"},control:{border:{color:"neutral-5"}}},anchor:{fontWeight:400},button:{border:{radius:"5px"}}},M=t(459),T=t(463),B=t(464),R=t.p+"static/media/avatar-placeholder.384fcdf7.png",U=t(9);function W(n){var e,t=n.data,c=n.did,a=t.accounts,i=t.profile,o=E(),d=Object(u.b)(),f=function(){var n=Object(u.b)(),e=n.activate,t=n.error,c=Object(r.useState)(),a=Object(v.a)(c,2),i=a[0],o=a[1];function l(n,e){return d.apply(this,arguments)}function d(){return(d=Object(j.a)(b.a.mark((function n(e,t){var r,c,a,i,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([null!==e&&void 0!==e?e:F.getAccount(),null!==t&&void 0!==t?t:F.getChainId()]);case 3:r=n.sent,c=Object(v.a)(r,2),a=c[0],i=c[1],null!=a&&(u=new g.AccountID({address:a,chainId:q(i)}),o(u)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.warn("Failed to handle setting accountId",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))).apply(this,arguments)}var s=Object(r.useCallback)((function(){return e(F).then((function(){return l()}),(function(n){console.warn("Failed to handle activation on connect",n)}))}),[e]);return Object(r.useEffect)((function(){var n=window.ethereum;if(null!=n&&"function"===typeof n.on&&!t){var r=function(n){e(F).then((function(){return l(null===i||void 0===i?void 0:i.address,n)}),(function(n){console.warn("Failed to handle activation on chain changed",n)}))},c=function(n){n.length>0&&e(F).then((function(){return l(n[0],(null===i||void 0===i?void 0:i.chainId)?q(i.chainId.toString()):void 0)}),(function(n){console.warn("Failed to handle activation on accounts changed",n)}))},a=function(n){e(F).then((function(){null==i&&l()}),(function(n){console.warn("Failed to handle activation on accounts changed",n)}))};return n.on("connect",s),n.on("chainChanged",r),n.on("accountsChanged",c),n.on("networkChanged",a),function(){"function"===typeof n.removeListener&&(n.removeListener("connect",s),n.removeListener("chainChanged",r),n.removeListener("accountsChanged",c),n.removeListener("networkChanged",a))}}}),[i,e,s,t]),[i,s]}(),h=Object(v.a)(f,2),p=h[0],x=h[1],m=Object(r.useMemo)((function(){return(null===i||void 0===i?void 0:i.image)?D(i.image,{height:65,width:65}):R}),[i]),w=!1,O=a.map((function(n){var e=n.address===(null===p||void 0===p?void 0:p.address);return w=w||e,Object(U.jsx)(l.a,{color:e?"brand":"neutral-3",children:n.address},n.address)})),y=p?Object(U.jsx)(M.a,{disabled:!w,onClick:function(){var n;null!=o&&(null===(n=d.library)||void 0===n||n.createLink(o.linkToDID).then((function(n){console.log("created link",n)}),(function(n){console.log("failed to create link",n)})))},plain:!0,children:Object(U.jsx)(l.a,{color:w?"brand":"neutral-4",weight:"bold",children:"Use this account"})}):Object(U.jsx)(M.a,{onClick:function(){x()},plain:!0,children:Object(U.jsx)(l.a,{color:"brand",weight:"bold",children:"Connect this account"})});return Object(U.jsxs)(s.a,{border:{color:"neutral-5"},margin:{bottom:"medium"},round:"small",children:[Object(U.jsxs)(s.a,{direction:"row",gap:"small",pad:"medium",children:[Object(U.jsx)(T.a,{size:"65px",src:m}),Object(U.jsxs)(s.a,{flex:!0,children:[Object(U.jsx)(l.a,{weight:"bold",children:null!==(e=null===i||void 0===i?void 0:i.name)&&void 0!==e?e:"(no name)"}),Object(U.jsx)(l.a,{color:"neutral-4",children:c})]}),Object(U.jsx)(s.a,{children:y})]}),Object(U.jsx)(s.a,{border:{color:"neutral-5",side:"top"},pad:"medium",children:O})]})}function G(n){var e=n.dids,t=Object.entries(e).map((function(n){var e=Object(v.a)(n,2),t=e[0],r=e[1];return Object(U.jsx)(W,{data:r,did:t},t)}));return Object(U.jsxs)(s.a,{alignSelf:"center",margin:"large",width:"large",children:[Object(U.jsx)(B.a,{textAlign:"center",children:"Choose an identity"}),t]})}function H(n){return new o.EthereumAuthProvider(n,n.selectedAddress)}function K(){var n=function(){var n=E(),e=Object(r.useState)({}),t=Object(v.a)(e,2),c=t[0],a=t[1],i=Object(r.useRef)(0);return Object(r.useEffect)((function(){if(null!==n){var e=++i.current;Promise.all(Object.entries(n.dids).map(function(){var n=Object(j.a)(b.a.mark((function n(e){var t,r,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(v.a)(e,2),r=t[0],c=t[1],n.t0=r,n.t1=c.map((function(n){return new g.AccountID(n)})),n.next=5,z(r);case 5:return n.t2=n.sent,n.abrupt("return",{did:n.t0,accounts:n.t1,profile:n.t2});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())).then((function(n){if(e===i.current){var t=n.reduce((function(n,e){var t=e.did,r=Object(f.a)(e,["did"]);return n[t]=r,n}),{});a(t)}}))}}),[n]),c}(),e=n?Object(U.jsx)(G,{dids:n}):Object(U.jsx)(l.a,{children:"Loading"});return Object(U.jsx)(d.a,{full:!0,theme:J,children:Object(U.jsx)(u.a,{getLibrary:H,children:Object(U.jsx)(s.a,{children:e})})})}i.a.render(Object(U.jsx)(c.a.StrictMode,{children:Object(U.jsx)(K,{})}),document.getElementById("root"))}},[[446,1,2]]]);
//# sourceMappingURL=main.9cd50bfa.chunk.js.map